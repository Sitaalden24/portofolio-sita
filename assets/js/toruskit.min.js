!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).TORUS={})}(this,(function(t){"use strict";var e=e||{};const s=["bg","bg-opacity","bg-lighten","bg-darken","bg-brightness","block","border","border-opacity","blur","blur.to","blur.from","mask","push.up","push.down","push.left","push.right","pull.up","pull.left","pull.right","pull.down","fade.in","fade.out","fade.to","fade.from","opacity","reveal","reveal.hide","rotate.to","rotate.from","rotateX.to","rotateX.from","rotateY.to","rotateY.from","scale.to","scale.from","scaleX.to","scaleX.from","scaleY.to","scaleY.from","shadow","shadow-offset.down","shadow-offset.up","shadow-offset.left","shadow-offset.right","shadow-intensity","skew.to","skew.from","skewX.to","skewX.from","skewY.to","skewY.from","text","text-opacity","delay","duration","top","bottom","up","down","left","right","shift.up","shift.right","shift.down","shift.left","originX","originY","wait"],i={activeValue:{block:"var(--tor-block);","fade.in":"0;","fade.out":"0;",mask:"var(--tor-mask-idle);",block:"var(--tor-block-idle);",reveal:"var(--tor-reveal-idle);","reveal.hide":"var(--tor-reveal-idle);"},additionalRules:{block:"--tor-block-scale: var(--tor-block-scale-idle); --tor-clip-delay: calc(var(--tor-duration-all) + var(--tor-delay-all, 0ms)); --tor-block-delay: var(--tor-delay-all, 0ms); --tor-block: var(--tor-block-idle);",reveal:"--tor-translateX: var(--tor-translateX-idle); --tor-translateY: var(--tor-translateY-idle);","reveal.hide":"--tor-translateX: var(--tor-translateX-idle); --tor-translateY: var(--tor-translateY-idle);"},alias:{"blur*":"blur","push*":"push-pull","pull*":"push-pull","shadow-offset*":"shadow-offset"},calc:{"push.up":-1,"push.left":-1,"pull.down":-1,"pull.right":-1,"shadow-offset.up":-1,"shadow-offset.left":-1,"shift.up":-1,"shift.left":-1},propertyAlias:{bg:"background-color","bg-lighten":"--tor-bg-lightness","bg-darken":"--tor-bg-lightness","bg-brightness":"--tor-bg-lightness",border:"border-color","push.up":"--tor-translateY","push.down":"--tor-translateY","push.left":"--tor-translateX","push.right":"--tor-translateX","pull.up":"--tor-translateY","pull.down":"--tor-translateY","pull.left":"--tor-translateX","pull.right":"--tor-translateX","fade*":"--tor-opacity",shadow:"box-shadow","shadow-offset.down":"--tor-shadow-offsetY","shadow-offset.up":"--tor-shadow-offsetY","shadow-offset.left":"--tor-shadow-offsetX","shadow-offset.right":"--tor-shadow-offsetX",text:"color","shift.up":"--tor-shiftY","shift.down":"--tor-shiftY","shift.left":"--tor-shiftX","shift.right":"--tor-shiftX"},cssNot:["blur.from","block","pull*","mask","fade.in","reveal","rotate.from","rotateX.from","rotateY.from","scale.from","scaleX.from","scaleY.from","skew.from","skewX.from","skewY.from"],percentage:["bg-opacity","bg-brightness","fade.to","fade.from","opacity","scale*","scaleX*","scaleY*","text-opacity"]},r={computedStyle:window.getComputedStyle(document.documentElement,null),height:window.innerHeight||document.documentElement.clientHeight,width:window.innerWidth||document.documentElement.clientWidth,resolution:{},resizing:!1,scroll:{running:!1,tick:0},mouse:{running:!1,tick:0},idleCallback:!!window.requestIdleCallback,isUnsupportedSVG:!!window.chrome||/AppleWebKit/i.test(navigator.userAgent),isSafari:/AppleWebKit/i.test(navigator.userAgent)},n=()=>{for(const[t,e]of Object.entries(S))if(r.width>=e.value){r.resolution.name=t,r.resolution.value=e.value;break}},o=t=>{if("string"==typeof t&&(t=[...document.querySelectorAll(t)]),t instanceof Node&&(t=[t]),t instanceof NodeList&&(t=[].slice.call(t)),t instanceof Set&&(t=[...t]),t.length)return!!t.length&&t},a=t=>{if(t.elements)for(const s of t.elements)s.TORUS||(s.TORUS=s.TORUS||{}),s.TORUS[t.name]=new e[t.name](s,t.options)};String.prototype.replaceAll=function(t){var e=this;for(let s in t)e=e.replace(new RegExp(s,"g"),t[s]);return e};const l=(t,e)=>{if(!t)return"";if(e&&(e=t.match(/(scroll|mouse|mouseX|mouseY|sensorX|sensorY)(.*?):(.*?)(@parallax|@tilt)\(.*?\)/g)))for(const s of e){let e=/@(.*?)\)/.exec(s)[0],i=/\((.*?)\)/.exec(e)[1],r={"@parallax":{name:"translate",method:"continuous",unit:"px",events:{mouseX:"X",mouseY:"Y",scroll:"Y"}},"@tilt":{name:"rotate",method:"self-continuous",unit:"deg",events:{mouseX:"Y",mouseY:"X"}}};for(const[n,o]of Object.entries(r))for(let[r,a]of Object.entries(o.events)){let l=new RegExp(`${r}(.*?)${n}`);if(l.test(s)){let s="@tilt"===n&&"mouseY"===r?"":"-";t=t.replace(e,`@T=${o.name}${a}(${s}${i}${o.unit};0${o.unit},{method:${o.method}})`)}else if(l=new RegExp("mouse"),l.test(s)){let r=[],a=new RegExp(`(mouse)(.*?)(${e.replace(/\(/g,"\\(").replace(/\)/g,"\\)")})`,"g").exec(s);for(const[t,e]of Object.entries(o.events)){let s="@tilt"===n&&"mouseY"===t?"":"-";r.push(a[1].replace(a[1],t)+a[2]+`@T=${o.name}${e}(${s}${i}${o.unit};0${o.unit}, {method:${o.method}})`)}t=t.replace(s,r.join(" "))}}}return m(t.replace(/\s\s+/g," ").replace(/ $/g,""),"\\[ | \\]|{ | }| { | : |: | :| ; |; | ;| ,|, | , |\\( | \\)|\\(\\( | \\(\\(| \\(\\( | \\)\\)| =>|=> | => | \\+| \\+ |\\+ | ~| ~ |~ | \\(").replace(/\((.*?)\)+/g,t=>t.replace(/ +/g,"░")).replace(/\\/g,"").replace(/@T=/g,"@transform=").replace(/@F=/g,"@filter=").trim()},h=t=>{let e=null;if(/(xs|sm|md|lg|xl|xxl)::/g.test(t=t)){let s=t.split("::");e=s[0],t=s[1]}return{resolution:e,value:t}},d=t=>{let e=null;if(!/^@/.test(t)&&/^(-|\+|\/\+|\/-|\/~|\.|.*?)\d/g.test(t)&&!Number(t)){let s=/(?!\d)(px|deg|%|cm|mm|in|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|ms|s)+/g.exec(t.replace(/\/+/g,""));s&&(e=s[1],t=t.replace(e,""))}return{value:t=p(t),unit:e}},c=t=>{let e,s,i=t.property,r=t.value,n=t.unit?t.unit:"",o=t.wrap;return w.includes(r)?(s=A[i]&&A[i].alias&&A[i].alias?A[i].alias:i,e=A[i]&&A[i].calc?`calc(var(--tor-${s}-${r}) * ${A[i].calc})`:`var(--tor-${s}-${r})`):e=A[i]&&A[i].calc?`${r*A[i].calc}${n}`:o?`${o}(${r}${n})`:`${r}${n}`,A[i]&&A[i].activeValue&&(e=A[i].activeValue),e},u=t=>{let e=t.match(/\b([^\s]+)\[(.*?)\]/g);if(e)for(let i of e){let e=[],r=i,n=/,{(?:.(?!,{))+}(?=\])/g.exec(i);n&&(i=i.replace(n[0],""),n=/,{(.*?)}/.exec(n[0])[1]);let o=/^(.*?)\:/.exec(i)[1],a=/\[(.*?)\]+/g.exec(i)[1].split(" ");for(let t of a)/^!/.test(t)?e.push(`!${o}:${s(n,t.replace("!",""))}`):e.push(`${o}:${s(n,t)}`);t=t.replace(r,e.join(" "))}function s(t,e){return t&&(e=/}\)/.test(e)?e.replace("})",`,${t}})`):e.replace(")",`,{${t}})`)),e}return t},p=t=>t=/(^(\d.*?)|^()|^(-\d.*?))\.(\d)+/g.test(t)?parseFloat(/((-|\+|)[0-9]*[.])?[0-9]+/g.exec(t)[0]):/^[-+]?\d+$/.test(t)?parseInt(/[+-]?(\d)+/g.exec(t)[0]):t,m=(t,e)=>{let s,i,r,n=t;for(const t of e.split("|"))r=t.replace(/ /g,""),i=new RegExp(t,"g"),s=n.replace(i,r),n=s.replace(/\\+/g,"");return s},f=(t,e)=>{let s={};switch(e.event){case"mouse":switch(e.options.method){case"middle":s={x:1-Math.abs((r.width/2-r.mouse.x)/(r.width/2)),y:1-Math.abs((r.height/2-r.mouse.y)/(r.height/2)),all:1-Math.sqrt(Math.pow(r.width/2-r.mouse.x,2)+Math.pow(r.height/2-r.mouse.y,2))/Math.sqrt(Math.pow(r.width/2,2)+Math.pow(r.height/2,2))};break;case"continuous":s={x:1-(r.width/2-r.mouse.x)/(r.width/2),y:1-(r.height/2-r.mouse.y)/(r.height/2)};break;case"self":s={x:t&&1-Math.abs((r.mouse.x-t.bounds.centerX)/t.bounds.maxXSide),y:t&&1-Math.abs((r.mouse.y-t.bounds.centerY)/t.bounds.maxYSide),all:t&&g(t,t.bounds.centerX,t.bounds.centerY)};break;case"self-continuous":s={x:t&&1+(r.mouse.x-t.bounds.centerX)/t.bounds.maxXSide,y:t&&1+(r.mouse.y-t.bounds.centerY)/t.bounds.maxYSide};break;case"parallax":s={x:(r.mouse.x-r.width/2)/(r.width/2),y:(r.mouse.y-r.height/2)/(r.height/2)}}break;case"scroll":{let i,n,o,a,l=0,h=0,d=e.options.end,c=e.options.start;switch("middle"===d&&(h=t.bounds.height/2,d=50),"shifted"===c&&(c=0,l=t.bounds.height/2,h=0),i=r.height/100*c+l,n=r.height/100*(d-c)+h,o=null,a=(r.height+r.scroll.y-t.bounds.offsetTop-i)/n,e.options.method){case"continuous":s={x:o,y:a};break;case"regular":s={x:o,y:Math.min(1,Math.max(0,a))}}break}}return{x:Math.round(1e3*s.x)/1e3,y:Math.round(1e3*s.y)/1e3,all:Math.round(1e3*s.all)/1e3}},g=(t,e,s)=>1-Math.abs(Math.sqrt(Math.pow(Math.abs(e-r.mouse.x),2)+Math.pow(Math.abs(s-r.mouse.y),2))/t.bounds.maxDiagonal),v=(t,e,s)=>{let i=e?t:t.target,n=e||t.boundingClientRect;function o(){i.TORUS&&i.TORUS.Main&&(e?i.TORUS.Main.set.bounds(n,s):i.TORUS.Main.set.bounds(n))}r.idleCallback?requestIdleCallback(()=>{o()}):requestAnimationFrame(()=>{setTimeout(()=>{o()},0)})},b=(t,e)=>{e=e.replace(/\//g,"");let s=/(.).*?(?=\+|-|~)/.exec(e);s&&(e=e.replace(s[0],""),s=d(s[0]).value);let i=/\+|-|~/.exec(e);i&&(i=i[0],e=e.replace(i,""));let r=d(e).value,n=d(e).unit;switch(i){case"+":t=t;break;case"-":t=-t;break;case"~":t=1,r=Math.round(Math.random()*(r-0)+0)}return`${s+t*r}${n||""}`},y=t=>{if(t.elements)for(const e of o(t.elements))e.TORUS&&e.TORUS[t.object]&&e.TORUS[t.object][t.fn](t.argument)},w=r.computedStyle.getPropertyValue("--tor-predefined-values").trim().split(","),S={},x=r.computedStyle.getPropertyValue("--tor-resolutions").replace(/"| +/g,"").split(",");let L=x.length-1;for(const t of x){let e=t.split(":"),s=d(e[1]);S[e[0]]={},S[e[0]].value=s.value,S[e[0]].unit=s.unit,S[e[0]].id=L--}n();const T={inview:".inview",active:".active",show:".show",hover:":hover",focus:":focus"},A=(()=>{const t={};for(const i of s){t[i]={};let s=/^(.*?)\./.exec(i),r=s?s[1]:i;t[i].propertyAlias="--tor-"+r,e("propertyAlias",i),e("activeValue",i),e("additionalRules",i),e("alias",i),e("calc",i),e("percentage",i),e("cssNot",i)}function e(e,s){let r=i[e]instanceof Array;for(const[n,o]of Object.entries(i[e])){let i=r?o:n,a=!!r||o;if(/\*/g.test(i)){let r=/^(.*?)\*/.exec(i)[1],n=/^(.*?)\./.exec(s);n&&r===n[1]&&(t[s][e]=a)}else i===s&&(t[s][e]=a)}}return t})(),_=document.createElement("style"),$={priority:{indexReplace:0,indexValue:0,regex:/^!(.*?)/},trigger:{indexReplace:0,indexValue:0,regex:/^((?:.)(?:(?!::)))*?:/},resolution:{indexReplace:0,indexValue:2,regex:/^(<|=|)(xs|sm|md|lg|xl|xxl)(.*?)::/},property:{indexReplace:1,indexValue:1,regex:/^(?:@|)(.*?)(\(|$)/},values:{indexReplace:0,indexValue:1,regex:/^\((.*?)\)$/}},E=(t,e,s)=>{let i={};t.attributes[s]=t.attributes[s]||{};for(const r of e){let e,n=/^((?:.)(?:(?!::)))*?(?=:)/g.exec(r);t.attributes[s]=t.attributes[s]||{},n?(n=n[0].replace("!",""),i[s]=i[s]||{},/^(mouse|scroll|sensor)/.test(n)?(e=/^.*?(?=(X|Y))/.exec(n),e=e?e[0]:n,t.attributes[s][e]=t.attributes[s][e]||{},t.attributes[s][e][n]=t.attributes[s][e][n]||{},i[s][e]=i[s][e]||{},i[s][e][n]=i[s][e][n]||[],i[s][e][n].push(r)):(t.attributes[s][n]=t.attributes[s][n]||{},i[s][n]=i[s][n]||[],i[s][n].push(r))):(t.attributes[s].idle=t.attributes[s].idle||{},i[s]=i[s]||{},i[s].idle=i[s].idle||[],i[s].idle.push(r))}for(const[e,s]of Object.entries(i))for(const[i,n]of Object.entries(s))if(/mouse|scroll|sensor/.test(i))for(const[s,o]of Object.entries(n))r(t,e,i,o,s);else r(t,e,i,n);function r(t,e,s,i,r){for(const[n,o]of Object.entries(i)){let i,a=o;i=r?t.attributes[e][s][r][n]={}:t.attributes[e][s][n]={},i.original=o,/@/.test(a)&&(i.isCustom=!0,a=a.replace("@",""));for(let[e,s]of Object.entries($)){let r=s.regex.exec(a);r?(a=a.replace(r[s.indexReplace],""),O(t,i,r,e,s)):O(t,i,r,e+":default",s)}}}},O=(t,s,i,r,n)=>{switch(r){case"priority":s.priority=!0;break;case"trigger":s.trigger={};let r=i[n.indexValue].replace(":",""),o=/\((.*?)\)/.exec(r);o?(s.trigger.name=r.replace(o[0],""),s.trigger.argument=o[1],"p"===o[1]&&(s.trigger.argument="parent"),/^#/.test(o[1])&&e.Parent.init(document.querySelector(o[1]),{trigger:s.trigger.name})):s.trigger.name=r,s.trigger.alias=T[s.trigger.name];let a=/X$|Y$/i.exec(s.trigger.name);s.trigger.direction=a?a[0].toLowerCase():"all","scroll"===s.trigger.name&&(s.trigger.direction="y");break;case"resolution":s.resolution=i[n.indexValue];break;case"property":if(s.property={},s.property.name=i[n.indexValue],/=/.test(s.property.name)){let t=s.property.name.split("=");s.property.cssFunction=t[0],s.property.name=t[1]}k(t,s);break;case"values":switch(C(t,s,i,n),s.property.name){case"offset":t.is.inviewOffset=s.values.all.end.value}break;case"resolution:default":s.resolution="all"}},k=(t,e)=>{let s=A[e.property.name];if(s)e.property.alias=s.propertyAlias||"",s.cssNot&&e.trigger&&(e.trigger.alias=`:not(${T[e.trigger.name]})`);else if(!e.isCustom)switch(e.noCSSProcess=!0,e.original){case"inview:revert":t.is.inviewRevert=!0}},C=(t,e,s,i)=>{let r,n,o,a={};if(e.values={},e.values.all=e.values.all||{},/\.\.\./.test(e.original)){e.values.multi=!0;let t=/\((.*?)\(/.exec(e.original);t&&(e.values.cssFunction=t[1])}if(o=s[i.indexValue],/'(.*?)'/.test(o)){let t=/'(.*?)'/.exec(o);o=o.replace(t[0],t[0].replace(/,+/g,"|").replace(/'+/g,""))}if(e.options={},e.trigger&&(/mouse/.test(e.original)&&(e.options.method="middle"),/scroll(?!(.*?)class)/.test(e.original)&&(e.options.start=0,e.options.end="middle",e.options.method="regular")),n=/(,{|^{)(.*?)}/.exec(o),n){for(const t of n[2].split(",")){let s=t.split(":"),i=s[0],r=s[1];switch(i){case"target":r=r.replace(/\|+/g,","),e.options[i]=document.querySelectorAll(r);break;default:let t=w.includes(r);e.options[i]=t?`var(--tor-${r})`:/^--/.test(r)?`var(${r})`:r}}o=o.replace(n[0],"")}r=o.split(";"),a.end=r[1],a.end?(a.start=u(r[0]),a.end=u(r[1])):(e.isCustom?a.start="0":a.start=null,a.end=r[0]);for(const t of["start","end"])if(a[t])if(/(xs|sm|md|lg|xl|xxl)::/g.test(a[t]))for(const s of a[t].split("░")){const i=h(s);let r=c(d(i.value));i.resolution?(e.values[i.resolution]=e.values[i.resolution]||{},l(i.resolution,t,r)):l("all",t,r)}else l("all",t,c(d(a[t])));function l(t,s,i){e.values[t][s]={},e.values[t].original=o;for(const[r,n]of Object.entries({value:i.value,unit:i.unit}))e.values[t][s][r]=n||0===n?n:null}function c(t){let s,i;return A[e.property.name]&&A[e.property.name].percentage?(s="%"===t.unit?t.value/100:t.value,i=null):(s=t.value,i=t.unit),{value:s,unit:i}}function u(t){let s=t;if(/\.\.\./.test(s)){s={},t=t.replace("...",""),t=e.values.cssFunction?t.replace(e.values.cssFunction,"").replace(/\(|\)/g,""):t;for(const[e,i]of Object.entries(t.split(","))){let t=d(i);s[e]={},s[e].value=t.value,s[e].unit=t.unit}}return s}/:class./.test(e.original)&&(e.options.target||(e.options.target=t.element))},R=(t,e,s)=>{if(!t.values)return{value:null,unit:null};let i,n,o,a=0;for(let l=0;l<=S[r.resolution.name].id;l++){let r=Object.keys(S).find(t=>S[t].id===l),h=t.values[r];h&&(h.start&&(a=s?h.start.value[s].value:h.start.value),h.end&&(n=s?h.end.value[s].value:h.end.value,i=s?h.end.value[s].unit?h.end.value[s].unit:"":h.end.unit?h.end.unit:"")),o="string"==typeof a||"string"==typeof n?e<1?a:n:Math.round(1e3*(a+(n-a)*e))/1e3}return{value:o,unit:i,start:a,end:n}},M=(t,e,s)=>{if(t instanceof Node&&(t=[t]),e instanceof Object){let i=document.createElement("div");for(const e of t)i.appendChild(e);e.appendChild(i),s&&i.classList.add(s)}else for(let i of t){let t,r,n;n=i.nextElementSibling,"svg"===e?(t=document.createElementNS("http://www.w3.org/2000/svg","svg"),t.setAttribute("xmlns","http://www.w3.org/2000/svg")):t=document.createElement(e),r=i.parentElement,t.appendChild(i),s&&t.classList.add(s),r.insertBefore(t,n)}};String.prototype.toCamelCase=function(){return this.replace(/[-_]+/g," ").replace(/ (.)/g,(function(t){return t.toUpperCase()})).replace(/ /g,"")};const X=(t,e)=>{let s=0;return"intersecting"===e&&(s=r.height/2),r.scroll.y+r.height+s>=t.offsetTop&&r.scroll.y+r.height-s<=t.offsetTop+t.height+r.height},j=t=>{function e(t){if(/svg/i.test(t.target.nodeName)){t.target.TORUS=t.target.TORUS||{},t.target.TORUS.svg=t.target.TORUS.svg||{};let e=t.boundingClientRect,s=t.target.TORUS.svg,i=t.target.width.baseVal.value,n=t.target.viewBox.baseVal.width?t.target.viewBox.baseVal.width:i;s.rect={offsetLeft:e.left+r.scroll.x,offsetTop:e.top+r.scroll.y};for(const t of s.children)t.set.bounds(t.element.getBBox(),{rect:s.rect,ratio:i/n}),t.set.intersecting(X(t.bounds,"intersecting")),t.is.inviewElement&&t.set.inview(X(t.bounds,"inview"));s.calculated=!0}}r.idleCallback?requestIdleCallback(()=>{e(t)}):requestAnimationFrame(()=>{setTimeout(()=>{e(t)},0)})},P={breakpoints:{}};P.styles=new Set;for(const t of Object.keys(S))P.breakpoints[t]=new Set;const Y=new Set,B=new Set,F=new Set,I=new Set,N=new Set,q=new Set,U=(t,e)=>{for(const s of t){const t=s.target.TORUS;t&&(t.Main&&(t.Main.bounds.calculated||void 0!==r.scroll.y&&(t.Main.is.svgChild||(s.isIntersecting?(t.Main.set.bounds(s.boundingClientRect),t.Main.set.intersecting(s.isIntersecting),t.Main.is.inviewElement&&t.Main.run.inview()):v(s))),/ 50%/.test(e.rootMargin)&&(t.Main.is.svgChild||(t.Main.set.intersecting(s.isIntersecting),t.Main.set.bounds(s.boundingClientRect))),/ 0%/.test(e.rootMargin)&&t.Main.set.inview(s.isIntersecting)),t.Parent&&(t.Parent.is.inviewElement&&t.Parent.run.inview(),/ 0%/.test(e.rootMargin)&&t.Parent.set.inview(s.isIntersecting)),t.Slider&&(t.Slider.bounds.calculated||t.Slider.set.bounds(s.boundingClientRect)),r.isUnsupportedSVG&&t.svg&&j(s))}if(void 0===r.scroll.y)for(const e of t)v(e)},D=new IntersectionObserver(U,{root:null,rootMargin:"50%"}),V=new IntersectionObserver(U,{root:null,rootMargin:"0%"}),H=()=>{let t=[],s=[];document.head.appendChild(_);new MutationObserver((function(i,r){for(const e of i)if(/script/i.test(e.target))H();else if("childList"===e.type){const i=e.addedNodes[0];1===i.nodeType&&(i.dataset.tor&&t.push(i),i.dataset.torGroup&&s.push(i))}e.Group.init(s),e.Parent.init(),e.Main.init(t);for(const t of P.styles)_.sheet.insertRule(t);r.disconnect()})).observe(document,{childList:!0,subtree:!0})};const W=t=>{let e=r.mouse;e.tick=0,e.x=t.clientX,e.y=t.clientY,e.running||(requestAnimationFrame(G),e.running=!0)},G=()=>{let t=function(t){t.tick>=10?t.running=!1:t.tick+=1;return t}(r.scroll).running,e=function(t){t.tick>=5?t.running=!1:t.tick+=1;return t}(r.mouse).running;if(e)for(const t of F)t.run.event("mouse");if(t){for(const t of B)t.run.event("scroll");for(const t of N)t.run.classScroll();if(r.isUnsupportedSVG)for(const t of q)t.set.intersecting(X(t.bounds,"intersecting")),t.is.inviewElement&&t.set.inview(X(t.bounds,"inview"));for(const t of Y)if(t.is.intersecting&&t.is.inviewOffset){(r.scroll.y+r.height-t.bounds.offsetTop)/r.height*100>=t.is.inviewOffset?!t.is.inview&&t.set.inview(!0,!0):t.is.inview&&t.set.inview(!1,!0)}else V.observe(t.element)}t||e?requestAnimationFrame(G):cancelAnimationFrame(G)};window.addEventListener("scroll",()=>{let t=r.scroll;t.tick=0,t.y=window.scrollY,t.x=window.scrollX,t.running||(requestAnimationFrame(G),t.running=!0)},{passive:!0}),window.addEventListener("mousemove",W,{passive:!0}),window.addEventListener("resize",(function(){let t=0;r.resizing||(requestAnimationFrame((function s(){t>=50?(r.resizing=!1,cancelAnimationFrame(s),r.height=window.innerHeight||document.documentElement.clientHeight,r.width=window.innerWidth||document.documentElement.clientWidth,n(),e.Main&&(D.disconnect(),e.Main.refresh()),e.Loop&&e.Loop.refresh(),e.Slider&&e.Slider.refresh()):(t+=1,requestAnimationFrame(s))})),r.resizing=!0)})),window.addEventListener("DOMContentLoaded",()=>{r.scroll.y=window.scrollY,r.scroll.x=window.scrollX}),window.addEventListener("mouseover",W),e.Group=class{constructor(t){this.element=t,this.element.dataset.torGroup=l(this.element.dataset.torGroup),this.dataset=this.element.dataset.torGroup.replace(/\((.*?)\)+/g,t=>t.replace(/ +/g,"░")),this.attributes=this.attributes||{},this._sortAttributes(),this._assignAttributes()}_sortAttributes(){let t=this.dataset.match(/(.*?);(?![^()]*\))/g);if(t)for(const e of t){let t=/^(.*?)=>/.exec(e)[1],s=/=>(.*?)$/.exec(e)[1].replace(/;$/,"").replace(/\s+(?=[^[\]]*\])/g,"░");this.attributes[t]=this.attributes[t]||{};for(const[e,i]of Object.entries(s.split(" ")))this.attributes[t][e]=i}else console.error("Missing semicolon at the end of "+this.dataset)}_assignAttributes(){for(const[t,e]of Object.entries(this.attributes)){let s=0,i=this.element.querySelectorAll(t);for(const t of i){let i=[];s+=1;for(let t of Object.values(e))t=t.replace(/░+/g," "),/\/(.*?)\//.test(t)?i.push(this._counting(s,t)):i.push(t);t.dataset.tor?t.dataset.tor=t.dataset.tor+" "+i.join(" "):t.dataset.tor=i.join(" "),I.add(t)}}}_counting(t,e){let s,i;const r=e.match(/\/(.*?)\/+/g);for(const n of r){const r=n.split(";");let o=r[0],a=r[1];a||(a=o,o=null),s=/\/(.*?)\//.test(o)?b(t,o):o,i=/\/(.*?)\//.test(a)?b(t,a):a,e=e.replace(n,`${s?s+";":""}${i}`)}return e}static init(t){t=o(t||"[data-tor-group]"),a({name:"Group",elements:t}),I&&e.Main.init(I)}};var z=e.Group;e.Parent=class{constructor(t,e){this.element=t,e&&e.trigger&&(this.element.dataset.torParent=this.element.dataset.torParent?this.element.dataset.torParent+" "+e.trigger:e.trigger),this.element.dataset.torParent=u(l(this.element.dataset.torParent,!0)),this.dataset=this.element.dataset.torParent.replace(/\((.*?)\)+/g,t=>t.replace(/ +/g,"░")).split(" "),this.is=this.is||{},this.has=this.has||{},this.attributes=this.attributes||{}}_getterSetter(){this.set={inview:(t,e)=>{this.is.inviewOffset&&!e||(this.is.inview=t,t?this.element.classList.add("inview"):this.is.inviewRevert&&this.element.classList.remove("inview"))}},this.run={inview:()=>{V.observe(this.element)}}}_sortAttributes(){let t={};for(const e of this.dataset)t.static=t.static||[],t.static.push(e);for(const[e,s]of Object.entries(t))E(this,s,e)}_addToElementsSet(){/inview/.test(this.dataset)&&(this.is.inviewElement=!0,Y.add(this))}static init(t,e){t=o(t||"[data-tor-parent~='inview']"),a({name:"Parent",elements:t,options:e});for(const e of["_getterSetter","_sortAttributes","_addToElementsSet"])y({elements:t,object:"Parent",fn:e})}};var K=e.Parent;e.Main=class{constructor(t){this.element=t,this.element.dataset.tor=u(l(this.element.dataset.tor,!0)),this.dataset=this.element.dataset.tor.replace(/\((.*?)\)+/g,t=>t.replace(/ +/g,"░")).split(" "),this.is=this.is||{},this.has=this.has||{},this.attributes=this.attributes||{},this.bounds=this.bounds||{}}_getterSetter(){this.get={bounds:()=>{this._getBounds()}},this.set={bounds:(t,e)=>{this._setBounds(t,e)},intersecting:t=>{this.is.intersecting=t},inview:(t,e)=>{this.is.inviewOffset&&!e||(this.is.inview=t,t?this.element.classList.add("inview"):this.is.inviewRevert&&this.element.classList.remove("inview"))}},this.run={inview:()=>{V.observe(this.element)},event:(t,e)=>{this._runEvent(t,e)},classScroll:()=>{this._onClassScroll()}}}_sortAttributes(){let t={};for(const e of this.dataset)/class./.exec(e)?(t.class=t.class||[],t.class.push(e)):/mouse|scroll|sensor/.test(e)?(t.dynamic=t.dynamic||[],t.dynamic.push(e),this.is.dynamicAttribute=!0):/loop:/.test(e)?(t.loop=t.loop||[],t.loop.push(e)):(t.static=t.static||[],t.static.push(e));for(const[e,s]of Object.entries(t))E(this,s,e),"static"===e&&this._CSSAddToSet(this.attributes.static),"loop"===e&&this._LOOPCreate(this.attributes.loop),"class"===e&&this._CLASSAddListeners(s);this.attributes.dynamic&&this.is.dynamicAttribute&&(this.attributes.dynamic.styles={},this.attributes.dynamic.currentStyles=new Set,this.element.classList.add("tor-hidden"))}_LOOPCreate(t){let e=[],s=[],i=[],r=[],n=[],o={},a=!1,l={};for(const[h,c]of Object.entries(t.loop)){let t="loop-"+c.property.name.replace(/\./g,"-"),u=`calc(var(--tor-${t}-duration) * var(--tor-${t}-speed,1))`,p=`var(--tor-${t}-timing)`,m=`var(--tor-${t}-direction)`,f=R(c,1),g=R(c,1).start;if(o[t]={index:Number(h),pause:null,iterations:0,currentIteration:0},l[h]=!1,f.value&&this.element.style.setProperty(`--tor-${t}-value`,`${f.value}${f.unit}`),g&&this.element.style.setProperty(`--tor-${t}-value-start`,`${g}${f.unit}`),c.options)for(const[e,s]of Object.entries(c.options))switch(e){case"pause":let i=d(c.options.pause);o[t].pause="s"===i.unit?1e3*i.value:i.value,a=!0;break;case"iterations":o[t].iterations=Number(c.options.iterations);break;case"delay":n.push(`var(--tor-${t}-delay)`),this.element.style.setProperty(`--tor-${t}-delay`,""+s);break;default:this.element.style.setProperty(`--tor-${t}-${e}`,""+s)}e.push(t),s.push(u),i.push(p),r.push(m)}this.element.style.setProperty("animation-name",e.join(", ")),this.element.style.setProperty("animation-duration",s.join(", ")),this.element.style.setProperty("animation-timing-function",i.join(", ")),this.element.style.setProperty("animation-direction",r.join(", ")),n.length&&this.element.style.setProperty("animation-delay",n.join(", ")),a&&(this.element.onanimationiteration=t=>{if(t.target===this.element&&(o[t.animationName].iterations&&o[t.animationName].currentIteration++,o[t.animationName].iterations===o[t.animationName].currentIteration&&(o[t.animationName].currentIteration=0,o[t.animationName].pause))){let e=o[t.animationName].pause;l[o[t.animationName].index]=!0;let s=[...Object.values(l)].map(t=>t?"paused":"running");this.element.style.setProperty("animation-play-state",s.join(", "));let i=setTimeout(()=>{l[o[t.animationName].index]=!1,s=[...Object.values(l)].map(t=>t?"paused":"running"),this.element.style.setProperty("animation-play-state",s.join(", ")),clearTimeout(i)},e)}})}_CSSAddToSet(t){for(const s of Object.values(t))for(const t of Object.values(s)){if(t.noCSSProcess)continue;let s="",i="",r="",n=[],o=null,a=t.trigger?"-"+t.trigger.name:"",l=t.trigger?t.trigger.alias:"",h=t.priority?" !important":"",d=t.property.name,u=t.property.alias;if(t.values||(t.values={all:{end:{value:"0%"}}}),t.trigger&&t.trigger.argument&&(r="parent"===t.trigger.argument?`[data-tor-parent~="${t.trigger.name}"]`:""+t.trigger.argument),t.property.cssFunction&&(o=d,d=t.property.cssFunction),t.isCustom){for(const s of["start","end"])if(t.values.all[s]){let i="end"===s?l:"",n=r?r+i:"";e({triggerAlias:i,rule:d,value:t.values.all[s].value,unit:t.values.all[s].unit,cssParent:n});for(const[r,o]of Object.entries(t.values))e({resolution:r,triggerAlias:i,rule:d,value:o[s].value,unit:o[s].unit,cssParent:n})}}else{let o=t.values?t.values.all.end.value:"",h=t.values&&t.values.all.end.unit?t.values.all.end.unit:"";if(t.options){for(const[e,s]of Object.entries(t.options))"target"!==e&&n.push(`--tor-${t.property.name}-${e}: ${c({property:e,value:s})}`);s=""+n.join(";")}A[t.property.name].additionalRules&&(i=A[t.property.name].additionalRules);let d=r?r+l:"";e({trigger:a,triggerAlias:l,rule:u,value:o,unit:h,cssParent:d});for(const[s,i]of Object.entries(t.values))"all"!==s&&e({resolution:s,triggerAlias:l,rule:u,value:i.end.value,unit:i.end.unit,cssParent:d})}function e(e){let r=`${e.cssParent?e.cssParent:""} [data-tor${e.selector||"~"}="${e.original||t.original}"]${e.cssParent?"":e.triggerAlias} {\n              ${e.rule}: ${c({property:e.propertyName||d,value:e.value,unit:e.unit,wrap:o})}${e.priority||h};\n              ${e.options||s}\n              ${e.additional||i}\n            }`.replace(/ +/g," ").replace(/\t|\n|\r+/g,"").replace(/\s*{\s*/g,"{").replace(/\s*}\s*/g,"}");P.breakpoints[e.resolution||t.resolution].add(r)}}}_getBounds(){this.bounds.calculated=!1;let t=this.element.ownerSVGElement;if(r.isUnsupportedSVG&&t){if(t){let e;t.TORUS=t.TORUS||{},t.TORUS.svg=t.TORUS.svg||{},this.is.svgChild=!0,this.has.svgParent=t,e=t.TORUS.svg,e.children=e.children||new Set,e.children.add(this),r.isSafari?requestAnimationFrame(()=>{setTimeout(()=>{D.observe(t)},50)}):D.observe(t)}}else D.observe(this.element)}_setBounds(t,e){let s=this.bounds,i=1,n=r.scroll.x,o=r.scroll.y;r.isUnsupportedSVG&&e&&(i=e.ratio,n=e.rect.offsetLeft,o=e.rect.offsetTop),s.calculated=!0,s.rect=t,s.width=s.rect.width*i,s.height=s.rect.height*i,s.top=s.rect.y*i,s.left=s.rect.x*i,s.right=s.rect.right||s.left+s.width,s.bottom=s.rect.bottom||s.top+s.height,s.offsetLeft=s.left+n,s.offsetTop=s.top+o,s.centerX=s.offsetLeft+s.width/2-r.scroll.x,s.centerY=s.offsetTop+s.height/2-r.scroll.y;let a=(t=>{let e=Math.sqrt(Math.pow(t.bounds.centerX,2)+Math.pow(t.bounds.centerY,2)),s=Math.sqrt(Math.pow(t.bounds.centerX,2)+Math.pow(r.height-t.bounds.centerY,2)),i=Math.sqrt(Math.pow(r.width-t.bounds.centerX,2)+Math.pow(t.bounds.centerY,2)),n=Math.sqrt(Math.pow(r.width-t.bounds.centerX,2)+Math.pow(r.height-t.bounds.centerY,2)),o=t.bounds.centerX,a=r.width-t.bounds.centerX,l=t.bounds.centerY,h=r.height-t.bounds.centerY;return{corner:Math.max(e,s,i,n),xSide:Math.max(o,a),ySide:Math.max(l,h)}})(this);this.bounds.maxDiagonal=Math.round(a.corner),this.bounds.maxXSide=a.xSide,this.bounds.maxYSide=a.ySide,this._runAllEvents(),this.element.classList.remove("tor-hidden")}_addToElementsSet(){/scroll(?!(.*?)class)/.test(this.dataset)&&B.add(this),/scroll(.*?)class/.test(this.dataset)&&N.add(this),/mouse/.test(this.dataset)&&F.add(this),/inview(?!\()/.test(this.dataset)&&(this.is.inviewElement=!0,Y.add(this)),this.element.ownerSVGElement&&q.add(this)}_runAllEvents(){for(const t of["mouse","scroll","sensor","inview"])this.attributes.dynamic&&this.attributes.dynamic[t]&&this.run.event(t,!0),"inview"===t&&this.is.inviewElement&&this.run.inview()}_runEvent(t,e){if(!this.is.intersecting&&!e)return;let s,i,n=[],o=this.attributes.dynamic;o.allStyles=o.allStyles||{};for(const e of Object.values(o[t]))for(const s of Object.values(e)){let e,i=f(this,{event:t,options:s.options})[s.trigger.direction];if(o.styles[s.resolution]=o.styles[s.resolution]||{},o.styles[s.resolution][s.property.name]=o.styles[s.resolution][s.property.name]||{},s.values.multi){e=[];for(let t in s.values.all.start.value){let r=R(s,i,t);e.push(`${r.value}${r.unit}`)}e=s.values.cssFunction?`${s.values.cssFunction}(${e.join(" ")})`:e.join(" ")}else{let t=R(s,i);o.styles[s.resolution][s.property.name].cssFunction=s.property.cssFunction,e=`${t.value}${t.unit}`}o.styles[s.resolution][s.property.name][`${t}${s.trigger.direction}`]=e,o.styles[s.resolution][s.property.name].targets=s.options.target}for(let t=S[r.resolution.name].id;t>=0;t--){let e=Object.keys(S).find(e=>S[e].id===t);if(o.styles[e]){o.currentStyles.add(Object.keys(o.styles[e])[0]),o.allStyles[Object.keys(o.styles[e])[0]]=o.styles[e];break}o.currentStyles.clear()}for(const[t,e]of Object.entries(o.allStyles))o.currentStyles.has(t)?a.call(this,e,"add"):a.call(this,e,"remove");function a(t,e){for(const[r,a]of Object.entries(t)){let t=[];switch(s=r,e){case"add":for(const e of["mouseall","mousex","mousey","scrollall","scrollx","scrolly","sensorall","sensorx","sensory"])a[e]&&t.push(a[e]);if(i=t.length>1?`calc(${t.join(" + ")})`:t[0],a.cssFunction&&(s=a.cssFunction,n.push(`${r}(${i})`)),a.targets)for(const t of a.targets)t.style.setProperty(s,a.cssFunction?n.join(" "):i);else this.element.style.setProperty(s,a.cssFunction?n.join(" "):i);break;case"remove":if(a.targets)for(const t of a.targets)a.cssFunction&&(t.style.this.element.style[a.cssFunction]=t.style[a.cssFunction].replace(t.style[a.cssFunction],"")),t.style.removeProperty(s);else a.cssFunction&&(this.element.style[a.cssFunction]=this.element.style[a.cssFunction].replace(this.element.style[a.cssFunction],"")),this.element.style.removeProperty(s);delete o.allStyles[s]}}}}_CLASSAddListeners(t){this._CLASSCreateActions(),t.some(t=>/click:/.test(t))&&this.element.addEventListener("click",this._onClassClick.bind(this)),t.some(t=>/hover:/.test(t))&&(this.element.addEventListener("mouseenter",this._onClassMouseEnter.bind(this)),this.element.addEventListener("mouseleave",this._onClassMouseLeave.bind(this))),t.some(t=>/timeout:/.test(t))&&this._onClassTimeout()}_CLASSCreateActions(){for(const t of Object.values(this.attributes.class))for(const e of Object.values(t)){let t=null,s=null;switch(e.options.start&&(t=d(e.options.start).value),e.options.end&&(s=d(e.options.end).value),e.trigger){case"timeout":t="s"===t.unit?1e3*t.value:t.value,s="s"===s.unit?1e3*s.value:s.value}e.actions={method:/class\.(.*?)$/.exec(e.property.name)[1],classes:e.values.all.end.value.split("░"),target:e.options.target,trigger:e.trigger.name,start:t,end:s}}}_onClassClick(){for(const t of Object.values(this.attributes.class.click))this._CLASSTriggerNewState(t)}_onClassMouseEnter(){for(const t of Object.values(this.attributes.class.hover))this._CLASSTriggerNewState(t)}_onClassMouseLeave(){for(const t of Object.values(this.attributes.class.hover))"toggle"===t.actions.method&&this._CLASSTriggerOldState(t)}_onClassTimeout(){for(const t of Object.values(this.attributes.class.timeout))t.time=setTimeout(()=>{this._CLASSTriggerNewState(t),end?t.time=setTimeout(()=>{this._CLASSTriggerOldState(t),clearTimeout(t.time)},end):clearTimeout(t.time)},start)}_onClassScroll(){for(const s of Object.values(this.attributes.class.scroll))s.actions.end?r.scroll.y>=s.actions.start&&r.scroll.y<=s.actions.end?t.call(this,s,"in"):t.call(this,s,"out"):r.scroll.y>=s.actions.start?t.call(this,s,"in"):"toggle"===s.actions.method&&s.actions.done&&e.call(this,s,!0);function t(t,s){switch(s){case"in":"toggle"===t.actions.method?!t.actions.done&&e.call(this,t,!1):e.call(this,t,!1);break;case"out":"toggle"===t.actions.method?t.actions.done&&e.call(this,t,!0):e.call(this,t,!0)}}function e(t,e){e||(this._CLASSTriggerNewState(t),t.actions.done=!0),e&&(this._CLASSTriggerOldState(t),t.actions.done=!1)}}_CLASSTriggerNewState(t){for(const e of o(t.actions.target))t.priority?setTimeout(()=>{[...t.actions.classes].map(s=>e.classList[t.actions.method](s))},10):[...t.actions.classes].map(s=>e.classList[t.actions.method](s))}_CLASSTriggerOldState(t){let e;switch(t.actions.method){case"add":e="remove";break;case"remove":e="add";break;default:e="toggle"}for(const s of o(t.actions.target))[...t.actions.classes].map(t=>s.classList[e](t))}_refresh(){this.get.bounds(),this._runAllEvents()}static refresh(t){y({elements:o(t||"[data-tor]"),object:"Main",fn:"_refresh"})}static init(t){t=o(t||"[data-tor]"),a({name:"Main",elements:t});for(const e of["_getterSetter","_sortAttributes","_getBounds","_addToElementsSet"])y({elements:t,object:"Main",fn:e});(()=>{for(const[t,e]of Object.entries(P.breakpoints))e.size&&P.styles.add(`@media (min-width: ${S[t].value}${S[t].unit}) { ${[...e].join(" ")} }`)})()}},H();var Q=e.Main;e.Slider=class{constructor(t,e){this.parent=t,this.parent.dataset.torSlider=l(this.parent.dataset.torSlider),this.dataset=this.parent.dataset.torSlider.replace(/\((.*?)\)+/g,t=>t.replace(/ +/g,"░")).split(" "),this.attributes=this.attributes||{},this.bounds=this.bounds||{},this._getterSetter(),this.setOptions(e),this.get.bounds()}_createSlider(){this.wrapItems(),this.slider&&this.itemsElements&&(this.activeSlide=0,this.isDown=!1,this.dragging=!1,this.scrolling=!1,this.differenceX=0,this.distanceX=0,this.startX=0,this.slider.translateLeft=0,this.lastTranslateLeft=0,this.slider.translateTop=0,this.lastTranslateTop=0,this.offsetLeft=this.parent.offsetLeft,this.offsetTop=this.parent.offsetTop,this.leftBoundsReached=!0,this.rightBoundsReached=!1,this.topBoundsReached=!0,this.bottomBoundsReached=!1,this.allItemsCount=this.itemsElements.length,setTimeout(()=>{this.setProperties(),this.setNavigation(),this.addEventListeners(),this.setActiveItems(!0),this.setShowItems()},10))}_getterSetter(){this.get={bounds:()=>{this._getBounds()}},this.set={bounds:t=>{this._setBounds(t)}}}setDimensions(){this.options.autoHeight||this.parent.style.setProperty("--tor-slider-height",this.bounds.height+"px"),this.parent.style.setProperty("--tor-slider-width",this.bounds.width+"px"),this._createSlider()}setDefaults(){this.slider&&this.itemsElements&&(this.activeSlide=0,this.isDown=!1,this.dragging=!1,this.scrolling=!1,this.differenceX=0,this.distanceX=0,this.startX=0,this.slider.translateLeft=0,this.lastTranslateLeft=0,this.slider.translateTop=0,this.lastTranslateTop=0,this.offsetLeft=this.parent.offsetLeft,this.offsetTop=this.parent.offsetTop,this.leftBoundsReached=!0,this.rightBoundsReached=!1,this.topBoundsReached=!0,this.bottomBoundsReached=!1,this.allItemsCount=this.itemsElements.length)}wrapItems(){if(!this.initialized){for(const t of this.parent.children)t.classList.value.includes("tor-slider-item")||M(t,"div","tor-slider-item");this.itemsElements=this.parent.querySelectorAll(".tor-slider-item"),M(this.itemsElements,this.parent,"tor-slider-items"),this.slider=this.parent.querySelector(".tor-slider-items"),M(this.slider,"div","tor-slider-inner"),this.sliderInner=this.parent.querySelector(".tor-slider-inner"),this.initialized=!0}}setOptions(t){E(this,this.dataset,"slider"),this.defaults={count:1,margin:0,pullArea:10,stretchOnDrag:!0,stretchOnClick:!1,addTrigger:!1,slide:!0,vertical:!1,drag:!0},this.options=Object.assign(this.defaults,t);for(const t of Object.values(this.attributes.slider.idle))if(t.values){let e=R(t,1);this.options[t.property.name.toCamelCase()]=e.value}}setProperties(){let t=0;this.parent.style.setProperty("--tor-slides-margin",this.options.margin+"px"),this.parent.style.setProperty("--tor-slides-count",this.options.count),this.parent.classList.add("tor-done"),this.sliderFullWidth=0,this.items=this.items||{};for(let[e,s]of Object.entries(this.itemsElements)){this.items[e]=this.items[e]||{},this.items[e].element=s,this.items[e].id=Number(e);let i=this.items[e].element.clientWidth;this.items[e].positionLeft=Number(e)+1,this.items[e].positionRight=this.allItemsCount-Number(e),this.sliderFullWidth+=i,this.items[e].offsetLeft=Number(e*(i+this.options.margin)),this.items[e].offsetTop=t,t=t+this.items[e].element.clientHeight+this.options.margin,this.items[e].element.setAttribute("data-tor-slider-item-id",this.items[e].id),this.options.addTrigger&&this.items[e].element.setAttribute("data-tor-parent",this.options.addTrigger.replace(/,+/g," ")),s.previousElementSibling?(this.items[e].pullAreaLeft_Start=this.items[e].offsetLeft-s.previousElementSibling.clientWidth-this.options.margin+this.options.pullArea,this.items[e].pullAreaLeft_End=this.items[e].offsetLeft+this.options.pullArea,this.items[e].pullAreaTop_Start=this.items[e].offsetTop-s.previousElementSibling.clientHeight-this.options.margin+this.options.pullArea,this.items[e].pullAreaTop_End=this.items[e].offsetTop+this.options.pullArea):(this.items[e].pullAreaLeft_Start=0,this.items[e].pullAreaLeft_End=this.options.pullArea,this.items[e].pullAreaTop_Start=0,this.items[e].pullAreaTop_End=this.options.pullArea),this.items[e].pullAreaRight_Start=this.items[e].offsetLeft+i+this.options.margin-this.options.pullArea,this.items[e].pullAreaRight_End=this.items[e].offsetLeft-this.options.pullArea,this.items[e].pullAreaBottom_Start=this.items[e].offsetTop+this.items[e].element.clientHeight+this.options.margin-this.options.pullArea,this.items[e].pullAreaBottom_End=this.items[e].offsetTop-this.options.pullArea,this.items[e].height=this.items[e].element.clientHeight}this.sliderClientWidth=this.bounds.width,this.sliderClientHeight=this.bounds.height,this.sliderScrollWidth=this.slider.scrollWidth,this.sliderScrollHeight=this.slider.scrollHeight,this.maxScrollX=this.options.slide?this.slider.scrollWidth-this.sliderClientWidth:0,this.maxScrollY=this.options.slide?this.slider.scrollHeight-this.sliderClientHeight:0,this.options.vertical||this.parent.style.setProperty("--tor-slider-area-width",this.sliderFullWidth+"px"),this.options.addTrigger}setNavigation(){this.navigation=this.navigation||{},this.createControls(),this.createIndicators()}addEventListeners(){document.addEventListener("mouseup",this._onUp.bind(this)),document.addEventListener("touchend",this._onUp.bind(this),{passive:!0}),document.addEventListener("mousemove",this._onMove.bind(this)),document.addEventListener("touchmove",this._onMove.bind(this),{passive:!0}),this.options.drag&&(this.slider.addEventListener("mousedown",this._onDown.bind(this)),this.slider.addEventListener("touchstart",this._onDown.bind(this),{passive:!0})),this.slider.addEventListener("dragstart",this._onDragStart.bind(this)),this.slider.addEventListener("click",this._onClickSlider.bind(this)),this.slider.addEventListener("transitionend",this._onTransitionEnd.bind(this),{passive:!0})}_onDown(t){this.options.slide&&this.options.drag&&window.requestAnimationFrame(()=>{this.isDown=!0,t.pageX&&(this.pointerDevice="pointer"),t.touches&&(this.pointerDevice="touch"),this.startX=this._page(t).x+this.slider.translateLeft,this.startY=this._page(t).y+this.slider.translateTop,this.distanceX=0,this.distanceY=0;let e=function(){this.isDown&&(this.differenceX=this.slider.translateLeft-this.lastTranslateLeft,this.lastTranslateLeft=this.slider.translateLeft,this.differenceY=this.slider.translateTop-this.lastTranslateTop,this.lastTranslateTop=this.slider.translateTop,this.parent.classList.add("dragging"),window.requestAnimationFrame(e))}.bind(this);e()})}_onMove(t){this.options.slide&&this.options.drag&&window.requestAnimationFrame(()=>{this.isDown&&(this.dragging=!0,this.dragMove=!0,this.distanceX=(this.startX-(this._page(t).x+this.slider.translateLeft))/2,this.distanceY=(this.startY-(this._page(t).y+this.slider.translateTop))/2,this.distanceX>0&&this.rightBoundsReached&&(this.distanceX=0),this.distanceX<0&&this.leftBoundsReached&&(this.distanceX=0),this.distanceY>0&&this.bottomBoundsReached&&(this.distanceY=0),this.distanceY<0&&this.topBoundsReached&&(this.distanceY=0),this.slider.translateLeft+=this.distanceX,this.slider.translateTop+=this.distanceY,this.options.vertical?this.slider.style.setProperty("transform",`translate3d(0px, ${-this.slider.translateTop}px, 0px)`):this.slider.style.setProperty("transform",`translate3d(${-this.slider.translateLeft}px, 0px, 0px)`),this.checkBounds(),this.dragging&&(this.options.vertical?(this.topBoundsReached&&(this.slider.translateTop=0,this.slider.style.setProperty("transform",`translate3d(0px, ${this.slider.translateTop}px, 0px)`)),this.bottomBoundsReached&&(this.maxScrollY=this.slider.scrollHeight-this.slider.clientHeight,this.slider.translateTop=this.maxScrollY,this.slider.style.setProperty("transform",`translate3d(0px, ${-this.slider.translateTop}px, 0px)`))):(this.leftBoundsReached&&(this.slider.translateLeft=0,this.slider.style.setProperty("transform",`translate3d(${this.slider.translateLeft}px, 0px, 0px)`),this.options.stretchOnDrag&&this.stretchOnBounds("positionLeft",(this.startX-this._page(t).x)/500,!1)),this.rightBoundsReached&&(this.slider.translateLeft=this.maxScrollX,this.slider.style.setProperty("transform",`translate3d(${-this.slider.translateLeft}px, 0px, 0px)`),this.options.stretchOnDrag&&this.stretchOnBounds("positionRight",(this.startX-(this._page(t).x+this.slider.translateLeft))/500,!1)))))})}_onUp(){this.options.slide&&this.options.drag&&window.requestAnimationFrame(()=>{if(this.isDown=!1,this.dragging){if(this.options.vertical){if(this.distanceY>=0)for(let t in this.items)this.slider.translateTop>=this.items[t].pullAreaTop_Start&&this.slider.translateTop<=this.items[t].pullAreaTop_End&&this.translate(this.items[this.items[t].id].offsetTop);if(this.distanceY<0)for(let t in this.items)this.slider.translateTop<=this.items[t].pullAreaBottom_Start&&this.slider.translateTop>=this.items[t].pullAreaBottom_End&&this.translate(this.items[this.items[t].id].offsetTop)}else{if(this.distanceX>=0)for(let t in this.items)this.slider.translateLeft>=this.items[t].pullAreaLeft_Start&&this.slider.translateLeft<=this.items[t].pullAreaLeft_End&&this.translate(this.items[this.items[t].id].offsetLeft);if(this.distanceX<0)for(let t in this.items)this.slider.translateLeft<=this.items[t].pullAreaRight_Start&&this.slider.translateLeft>=this.items[t].pullAreaRight_End&&this.translate(this.items[this.items[t].id].offsetLeft)}if(this.setActiveItems(),this.options.vertical){if(this.topBoundsReached||this.bottomBoundsReached)for(let t in this.items)this.items[t].element.style.setProperty("transform","translate3d(0px, 0px, 0px)")}else if(this.leftBoundsReached||this.rightBoundsReached)for(let t in this.items)this.items[t].element.style.setProperty("transform","translate3d(0px, 0px, 0px)")}setTimeout(()=>{this.dragMove=!1},50),this.parent.classList.remove("dragging"),this.dragging=!1})}_onClickPrev(t){t.preventDefault(),this.scrolling||this.slideTo("prev")}_onClickNext(t){t.preventDefault(),this.scrolling||this.slideTo("next")}_onClickIndicators(t){t.preventDefault(),t.target.matches("[data-tor-slide-to]")&&this.slideTo(Number(t.target.getAttribute("data-tor-slide-to")))}_onClickSlider(t){this.dragMove&&(t.preventDefault(),t.stopPropagation())}_onDragStart(t){t.preventDefault(),t.stopPropagation()}_onTransitionEnd(t){window.requestAnimationFrame(()=>{t.target.classList.contains("tor-slider-items")&&t.propertyName.match("transform")&&(this.sliding=!1,this.parent.classList.remove("sliding"),this.parent.classList.remove("translating"),this.setShowItems())})}checkBounds(){this.leftBoundsReached=this.slider.translateLeft<=0,this.rightBoundsReached=this.sliderClientWidth+this.slider.translateLeft>=this.sliderScrollWidth-1,this.topBoundsReached=this.slider.translateTop<=0,this.bottomBoundsReached=this.sliderClientHeight+this.slider.translateTop>=this.sliderScrollHeight-1}createControls(){if(!this.options.controls)return;this.navigation.controlsElement&&this.navigation.controlsElement.remove();let t={prev:"Prev",next:"Next"};this.navigation.controlsElement=document.createElement("nav"),this.navigation.controlsElement.classList.add("slider-controls"),this.sliderInner.appendChild(this.navigation.controlsElement);for(let[e,s]of Object.entries(t)){let t;t=document.createElement("a"),t.addEventListener("click",this["_onClick"+s].bind(this)),t.classList.add("slider-"+e,"tor-slider-internal"),t.setAttribute("role","button"),t.setAttribute("aria-label",`Slider ${e} button`),t.setAttribute("href","#"),t.setAttribute("data-tor-slide-to",e),this.navigation.controlsElement.appendChild(t)}}createIndicators(){if(this.options.indicators){this.navigation.indicatorsElement&&this.navigation.indicatorsElement.remove(),this.navigation.indicatorsElement=document.createElement("nav"),this.navigation.indicatorsElement.classList.add("slider-indicators"),this.parent.appendChild(this.navigation.indicatorsElement),this.navigation.indicatorsElement.addEventListener("click",this._onClickIndicators.bind(this)),this.navigation.indicatorsCount=this.allItemsCount/this.options.count;for(let t=0;t<this.navigation.indicatorsCount;t++){let e;e=document.createElement("a"),e.setAttribute("href","#"),e.setAttribute("role","button"),e.setAttribute("aria-label",`Show the number ${t*this.options.count} slide button`),e.setAttribute("data-tor-slide-to",t*this.options.count),e.classList.add("slider-indicator","tor-slider-internal"),this.navigation.indicatorsElement.appendChild(e)}}}_page(t){let e,s;switch(this.pointerDevice){case"pointer":e=t.pageX,s=t.pageY;break;case"touch":e=t.touches[0].pageX,s=t.touches[0].pageY}return{x:e,y:s}}slideTo(t){window.requestAnimationFrame(()=>{let e=this.activeSlide;"next"===t&&(this.distanceX=0,this.distanceY=0,this.activeSlide<this.allItemsCount-this.options.count?(this.parent.classList.add("sliding"),this.activeSlide++,this.options.slide&&(this.options.vertical?this.translate(this.items[this.activeSlide].offsetTop):this.translate(this.items[this.activeSlide].offsetLeft))):this.options.stretchOnClick&&this.stretchOnBounds("positionRight",3,!0)),"prev"===t&&(this.distanceX=0,this.activeSlide>0?(this.parent.classList.add("sliding"),this.activeSlide--,this.options.slide&&(this.options.vertical?this.translate(this.items[this.activeSlide].offsetTop):this.translate(this.items[this.activeSlide].offsetLeft))):this.options.stretchOnClick&&this.stretchOnBounds("positionLeft",-3,!0)),(Number(t)||0===t||"0"===t)&&(t=Number(t),this.distanceX=0,this.activeSlide=t,e!==this.activeSlide&&(this.parent.classList.add("sliding"),this.items[this.activeSlide]?this.options.vertical?this.items[this.activeSlide].offsetTop>=this.maxScrollY?this.translate(this.maxScrollY):this.translate(this.items[this.activeSlide].offsetTop):this.items[this.activeSlide].offsetLeft>=this.maxScrollX?this.translate(this.maxScrollX):this.translate(this.items[this.activeSlide].offsetLeft):console.warn("It looks like you are pointing to non-existing slide in this slider:",this.parent))),e!==this.activeSlide&&this.setActiveItems()})}translate(t){this.options.vertical?(this.slider.translateTop=t,this.slider.style.setProperty("transform",`translate3d(0px, ${-this.slider.translateTop}px, 0px)`)):(this.slider.translateLeft=t,this.slider.style.setProperty("transform",`translate3d(${-this.slider.translateLeft}px, 0px, 0px)`)),this.options.vertical?(this.topBoundsReached&&this.bottomBoundsReached||this.parent.classList.add("translating"),(this.topBoundsReached||this.bottomBoundsReached)&&this.parent.classList.remove("translating")):(this.leftBoundsReached&&this.rightBoundsReached||this.parent.classList.add("translating"),(this.leftBoundsReached||this.rightBoundsReached)&&this.parent.classList.remove("translating"))}setShowItems(){for(let t in this.items)this.items[t].element.classList.remove("show");for(let t=0;t<this.options.count;t++)this.activeSlide+t<this.allItemsCount&&this.items[this.activeSlide+t].element.classList.add("show")}setActiveItems(t){let e=[];this.sliding=!0;for(let t in this.items)this.items[t].element.classList.remove("active"),this.options.slide||this.items[t].element.classList.remove("show");for(let t in this.items)this.items[t].element.classList.remove("active"),this.options.vertical?(this.slider.translateTop>=this.items[t].pullAreaTop_Start&&this.slider.translateTop<=this.items[t].pullAreaTop_End||this.slider.translateTop<=this.items[t].pullAreaBottom_Start&&this.slider.translateTop>=this.items[t].pullAreaBottom_End)&&(this.activeSlide=this.items[t].id):(this.slider.translateLeft>=this.items[t].pullAreaLeft_Start&&this.slider.translateLeft<=this.items[t].pullAreaLeft_End||this.slider.translateLeft<=this.items[t].pullAreaRight_Start&&this.slider.translateLeft>=this.items[t].pullAreaRight_End)&&(this.activeSlide=this.items[t].id);t&&(this.slider.translateLeft=this.items[this.activeSlide].offsetLeft,this.slider.style.setProperty("transform",`translate3d(${-this.slider.translateLeft}px, 0px, 0px)`));for(let t=0;t<this.options.count;t++)this.activeSlide+t<this.allItemsCount&&(e.push(this.items[this.activeSlide+t].height),setTimeout(()=>{this.items[this.activeSlide+t].element.classList.add("active")},10),this.options.slide||setTimeout(()=>{this.items[this.activeSlide+t].element.classList.add("show")},10));if(this.options.autoHeight){let t=0,s=(this.options.count-1)*this.options.margin;for(let s of e)t=s+t;this.parent.style.setProperty("--tor-slider-height",(this.options.vertical?t+s:Math.max(...e))+"px")}if(this.options.indicators){for(let t of this.navigation.indicatorsElement.querySelectorAll("[data-tor-slide-to]"))t.classList.remove("active");this.activeSlide+this.options.count<this.allItemsCount?this.navigation.indicatorsElement.querySelector(`[data-tor-slide-to="${parseInt(this.activeSlide/this.options.count)*this.options.count}"]`).classList.add("active"):this.navigation.indicatorsElement.querySelector("[data-tor-slide-to]:last-child").classList.add("active")}}compressOnBounds(t,s,i){let r,n,o;r=(1-(1+this.distanceX*s))/1e3,n=e.Util.easing.easeOutQuad(r),o=t*s*n;for(let e in this.items)1===s&&this.items[e].element.style.setProperty("transform",`translate3d(${o-this.items[e].positionLeft*(t/5)*n}px, 0px, 0px)`),-1===s&&this.items[e].element.style.setProperty("transform",`translate3d(${o+this.items[e].positionRight*(t/5)*n}px, 0px, 0px)`);i&&setTimeout(()=>{for(let t in this.items)this.items[t].element.style.setProperty("transform","translate3d(0px, 0px, 0px)")},200)}stretchOnBounds(t,e,s){for(let s in this.items)this.items[s].element.style.setProperty("transform",`translate3d(${-e*(this.items[s][t]*this.items[s][t])}px, 0px, 0px)`);if(s)for(let t in this.items)setTimeout(()=>{this.items[t].element.style.setProperty("transform","translate3d(0px, 0px, 0px)")},200)}_getBounds(){this.bounds.calculated=!1,D.observe(this.parent)}_setBounds(t){let e=this.bounds;e.calculated=!0,e.rect=t,e.top=e.rect.top,e.right=e.rect.right,e.bottom=e.rect.bottom,e.left=e.rect.left,e.offsetLeft=e.left+r.scroll.x,e.offsetTop=e.top+r.scroll.y,e.width=e.rect.width,e.height=e.rect.height,this.setDimensions()}_refresh(){this.get.bounds(),this.setDimensions(),this.setProperties(),this.setNavigation(),this.setActiveItems(!0),this.setShowItems()}static refresh(t){y({elements:o(t||".tor-slider"),object:"Slider",fn:"_refresh"})}static slideTo(t,e){y({elements:o(t||".tor-slider"),object:"Slider",fn:"slideTo",argument:e})}static createExternalControls(){for(const t of document.querySelectorAll("[data-tor-slide-to]:not(.tor-slider-internal)")){let s;s=t.hasAttribute("data-tor-slide-target")?document.querySelectorAll(t.getAttribute("data-tor-slide-target")):document.querySelectorAll(/[^\/]+$/.exec(t.href)[0]);let i=t.getAttribute("data-tor-slide-to");t.addEventListener("click",t=>{t.preventDefault();for(const t of s)e.Slider.slideTo(t,i)})}}static init(t,e){t=o(t||".tor-slider"),a({name:"Slider",elements:t,options:e}),this.createExternalControls()}},window.addEventListener("load",()=>{e.Slider.init()});var J=e.Slider;t.group=z,t.main=Q,t.parent=K,t.slider=J,Object.defineProperty(t,"__esModule",{value:!0})}));